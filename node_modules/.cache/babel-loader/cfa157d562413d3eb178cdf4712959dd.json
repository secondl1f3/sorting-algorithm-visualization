{"ast":null,"code":"var _jsxFileName = \"/Users/ahmadfajar/Masters/Computer Science/Algorithm/sorting/hw3/sort-visualizer/src/components/organisms/SortVisualizer/index.js\";\nimport React, { Component } from 'react';\nimport './style.css'; // Sub components\n\nimport SortChart from '../SortChart';\nimport VisualizerControls from '../../molecules/VisualizerControls';\nimport ProgressBar from '../../molecules/ProgressBar';\nimport ColorKey from '../../molecules/ColorKey';\nimport SortInfo from '../../molecules/SortInfo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass SortVisualizer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      trace: [],\n      traceStep: -1,\n      originalArray: [],\n      array: [],\n      groupA: [],\n      groupB: [],\n      groupC: [],\n      groupD: [],\n      sortedIndices: [],\n      timeEnd: 0,\n      timeoutIds: [],\n      playbackSpeed: 1\n    };\n\n    this._reset = array => {\n      this.setState({\n        array,\n        trace: [],\n        traceStep: -1,\n        groupA: [],\n        groupB: [],\n        groupC: [],\n        groupD: [],\n        sortedIndices: [],\n        originalArray: [...array]\n      });\n    };\n\n    this.clearTimeouts = () => {\n      this.state.timeoutIds.forEach(timeoutId => clearTimeout(timeoutId));\n      this.setState({\n        timeoutIds: []\n      });\n    };\n\n    this._changeVisualState = visualState => {\n      this.setState({\n        array: visualState.array,\n        groupA: visualState.groupA,\n        groupB: visualState.groupB,\n        groupC: visualState.groupC,\n        groupD: visualState.groupD,\n        sortedIndices: visualState.sortedIndices\n      });\n    };\n\n    this.run = trace => {\n      const timeoutIds = [];\n      const timer = 250 / this.state.playbackSpeed; // Set a timeout for each item in the trace\n\n      trace.forEach((item, i) => {\n        let timeoutId = setTimeout(item => {\n          this.setState(prevState => ({\n            traceStep: prevState.traceStep + 1\n          }), this._changeVisualState(item));\n        }, i * timer, item);\n        timeoutIds.push(timeoutId);\n      }); // Clear timeouts upon completion\n\n      let timeoutId = setTimeout(this.clearTimeouts, trace.length * timer);\n      timeoutIds.push(timeoutId);\n      this.setState({\n        timeoutIds\n      });\n    };\n\n    this.pause = () => {\n      this.clearTimeouts();\n    };\n\n    this.continue = () => {\n      const trace = this.state.trace.slice(this.state.traceStep);\n      this.run(trace);\n    };\n\n    this.stepForward = () => {\n      const trace = this.state.trace;\n      const step = this.state.traceStep;\n\n      if (step < trace.length - 1) {\n        const item = trace[step + 1];\n        this.setState({\n          traceStep: step + 1\n        }, this._changeVisualState(item));\n      }\n    };\n\n    this.stepBackward = () => {\n      const trace = this.state.trace;\n      const step = this.state.traceStep;\n\n      if (step > 0) {\n        const item = trace[step - 1];\n        this.setState({\n          traceStep: step - 1\n        }, this._changeVisualState(item));\n      }\n    };\n\n    this.repeat = () => {\n      this.clearTimeouts();\n      this.setState(prevState => ({\n        array: [...prevState.originalArray],\n        traceStep: -1,\n        comparing: [],\n        compared: [],\n        sorted: []\n      }));\n      this.run(this.state.trace);\n    };\n\n    this.adjustPlaybackSpeed = speed => {\n      const playing = this.state.timeoutIds.length > 0;\n      this.pause();\n      const playbackSpeed = Number(speed.split('x')[0]);\n      this.setState({\n        playbackSpeed\n      }, () => {\n        if (playing) this.continue();\n      });\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.array !== this.props.array) {\n      this._reset(this.props.array);\n    }\n\n    if (prevProps.trace !== this.props.trace) {\n      this.clearTimeouts();\n      this.setState({\n        trace: this.props.trace\n      });\n    }\n  } // Actions\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SortVisualizer\",\n      children: [/*#__PURE__*/_jsxDEV(SortChart, {\n        numbers: this.state.array,\n        maxNum: Math.max(...this.state.array),\n        groupA: this.state.groupA,\n        groupB: this.state.groupB,\n        groupC: this.state.groupC,\n        groupD: this.state.groupD,\n        sortedIndices: this.state.sortedIndices\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"SortVisualizer__ProgressBar\",\n        children: /*#__PURE__*/_jsxDEV(ProgressBar, {\n          width: this.state.trace.length > 0 ? this.state.traceStep / (this.state.trace.length - 1) * 100 : 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"SortVisualizer__ExecTime\",\n        children: [\"Execution Time: \", endElapsedTime()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VisualizerControls, {\n        onPlay: this.state.traceStep === -1 ? this.run.bind(this, this.state.trace) : this.continue.bind(this),\n        onPause: this.pause.bind(this),\n        onForward: this.stepForward.bind(this),\n        onBackward: this.stepBackward.bind(this),\n        onRepeat: this.repeat.bind(this),\n        onAdjustSpeed: this.adjustPlaybackSpeed,\n        playing: this.state.timeoutIds.length > 0,\n        playDisabled: this.state.traceStep >= this.state.trace.length - 1 && this.state.traceStep !== -1 || this.state.trace.length <= 0 // timeStart={\n        //   this.state.traceStep === -1 ? startElapsedTime() : 0\n        // }\n        // timeEnd={\n        //   (this.state.traceStep >= this.state.trace.length - 1 &&\n        //       this.state.traceStep !== -1) ||\n        //   this.state.trace.length <= 0 ? endElapsedTime() : 0\n        // }\n        ,\n        forwardDisabled: this.state.traceStep >= this.state.trace.length - 1,\n        backwardDisabled: this.state.traceStep <= 0,\n        repeatDisabled: this.state.traceStep <= 0,\n        playbackSpeed: this.state.playbackSpeed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ColorKey, { ...this.props.colorKey\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SortInfo, { ...this.props.desc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nlet startTime, endTime;\n\nfunction startElapsedTime() {\n  startTime = new Date();\n}\n\n;\n\nfunction endElapsedTime() {\n  endTime = new Date();\n  let timeDiff = endTime - startTime; //in ms\n  // strip the ms\n\n  timeDiff /= 1000; // get seconds\n\n  let seconds = Math.round(timeDiff);\n  console.log(seconds + \" seconds\");\n}\n\nexport default SortVisualizer;","map":{"version":3,"sources":["/Users/ahmadfajar/Masters/Computer Science/Algorithm/sorting/hw3/sort-visualizer/src/components/organisms/SortVisualizer/index.js"],"names":["React","Component","SortChart","VisualizerControls","ProgressBar","ColorKey","SortInfo","SortVisualizer","state","trace","traceStep","originalArray","array","groupA","groupB","groupC","groupD","sortedIndices","timeEnd","timeoutIds","playbackSpeed","_reset","setState","clearTimeouts","forEach","timeoutId","clearTimeout","_changeVisualState","visualState","run","timer","item","i","setTimeout","prevState","push","length","pause","continue","slice","stepForward","step","stepBackward","repeat","comparing","compared","sorted","adjustPlaybackSpeed","speed","playing","Number","split","componentDidUpdate","prevProps","props","render","Math","max","endElapsedTime","bind","colorKey","desc","startTime","endTime","startElapsedTime","Date","timeDiff","seconds","round","console","log"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,aAAP,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,kBAAP,MAA+B,oCAA/B;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,QAAP,MAAqB,0BAArB;;;AAEA,MAAMC,cAAN,SAA6BN,SAA7B,CAAuC;AAAA;AAAA;AAAA,SACrCO,KADqC,GAC7B;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,SAAS,EAAE,CAAC,CAFN;AAINC,MAAAA,aAAa,EAAE,EAJT;AAKNC,MAAAA,KAAK,EAAE,EALD;AAMNC,MAAAA,MAAM,EAAE,EANF;AAONC,MAAAA,MAAM,EAAE,EAPF;AAQNC,MAAAA,MAAM,EAAE,EARF;AASNC,MAAAA,MAAM,EAAE,EATF;AAUNC,MAAAA,aAAa,EAAE,EAVT;AAWNC,MAAAA,OAAO,EAAE,CAXH;AAaNC,MAAAA,UAAU,EAAE,EAbN;AAcNC,MAAAA,aAAa,EAAE;AAdT,KAD6B;;AAAA,SA8BrCC,MA9BqC,GA8B3BT,KAAD,IAAW;AAClB,WAAKU,QAAL,CAAc;AACZV,QAAAA,KADY;AAEZH,QAAAA,KAAK,EAAE,EAFK;AAGZC,QAAAA,SAAS,EAAE,CAAC,CAHA;AAIZG,QAAAA,MAAM,EAAE,EAJI;AAKZC,QAAAA,MAAM,EAAE,EALI;AAMZC,QAAAA,MAAM,EAAE,EANI;AAOZC,QAAAA,MAAM,EAAE,EAPI;AAQZC,QAAAA,aAAa,EAAE,EARH;AASZN,QAAAA,aAAa,EAAE,CAAC,GAAGC,KAAJ;AATH,OAAd;AAWD,KA1CoC;;AAAA,SA4CrCW,aA5CqC,GA4CrB,MAAM;AACpB,WAAKf,KAAL,CAAWW,UAAX,CAAsBK,OAAtB,CAA+BC,SAAD,IAC5BC,YAAY,CAACD,SAAD,CADd;AAGA,WAAKH,QAAL,CAAc;AAAEH,QAAAA,UAAU,EAAE;AAAd,OAAd;AACD,KAjDoC;;AAAA,SAmDrCQ,kBAnDqC,GAmDfC,WAAD,IAAiB;AACpC,WAAKN,QAAL,CAAc;AACZV,QAAAA,KAAK,EAAEgB,WAAW,CAAChB,KADP;AAEZC,QAAAA,MAAM,EAAEe,WAAW,CAACf,MAFR;AAGZC,QAAAA,MAAM,EAAEc,WAAW,CAACd,MAHR;AAIZC,QAAAA,MAAM,EAAEa,WAAW,CAACb,MAJR;AAKZC,QAAAA,MAAM,EAAEY,WAAW,CAACZ,MALR;AAMZC,QAAAA,aAAa,EAAEW,WAAW,CAACX;AANf,OAAd;AAQD,KA5DoC;;AAAA,SA8DrCY,GA9DqC,GA8D9BpB,KAAD,IAAW;AACf,YAAMU,UAAU,GAAG,EAAnB;AACA,YAAMW,KAAK,GAAG,MAAM,KAAKtB,KAAL,CAAWY,aAA/B,CAFe,CAIf;;AACAX,MAAAA,KAAK,CAACe,OAAN,CAAc,CAACO,IAAD,EAAOC,CAAP,KAAa;AACzB,YAAIP,SAAS,GAAGQ,UAAU,CACvBF,IAAD,IAAU;AACR,eAAKT,QAAL,CACGY,SAAD,KAAgB;AACdxB,YAAAA,SAAS,EAAEwB,SAAS,CAACxB,SAAV,GAAsB;AADnB,WAAhB,CADF,EAIE,KAAKiB,kBAAL,CAAwBI,IAAxB,CAJF;AAMD,SARuB,EASxBC,CAAC,GAAGF,KAToB,EAUxBC,IAVwB,CAA1B;AAaAZ,QAAAA,UAAU,CAACgB,IAAX,CAAgBV,SAAhB;AACD,OAfD,EALe,CAsBf;;AACA,UAAIA,SAAS,GAAGQ,UAAU,CACxB,KAAKV,aADmB,EAExBd,KAAK,CAAC2B,MAAN,GAAeN,KAFS,CAA1B;AAIAX,MAAAA,UAAU,CAACgB,IAAX,CAAgBV,SAAhB;AAEA,WAAKH,QAAL,CAAc;AAAEH,QAAAA;AAAF,OAAd;AACD,KA5FoC;;AAAA,SA8FrCkB,KA9FqC,GA8F7B,MAAM;AACZ,WAAKd,aAAL;AACD,KAhGoC;;AAAA,SAkGrCe,QAlGqC,GAkG1B,MAAM;AACf,YAAM7B,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAX,CAAiB8B,KAAjB,CAAuB,KAAK/B,KAAL,CAAWE,SAAlC,CAAd;AACA,WAAKmB,GAAL,CAASpB,KAAT;AACD,KArGoC;;AAAA,SAuGrC+B,WAvGqC,GAuGvB,MAAM;AAClB,YAAM/B,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAzB;AACA,YAAMgC,IAAI,GAAG,KAAKjC,KAAL,CAAWE,SAAxB;;AACA,UAAI+B,IAAI,GAAGhC,KAAK,CAAC2B,MAAN,GAAe,CAA1B,EAA6B;AAC3B,cAAML,IAAI,GAAGtB,KAAK,CAACgC,IAAI,GAAG,CAAR,CAAlB;AACA,aAAKnB,QAAL,CACE;AAAEZ,UAAAA,SAAS,EAAE+B,IAAI,GAAG;AAApB,SADF,EAEE,KAAKd,kBAAL,CAAwBI,IAAxB,CAFF;AAID;AACF,KAjHoC;;AAAA,SAmHrCW,YAnHqC,GAmHtB,MAAM;AACnB,YAAMjC,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAzB;AACA,YAAMgC,IAAI,GAAG,KAAKjC,KAAL,CAAWE,SAAxB;;AACA,UAAI+B,IAAI,GAAG,CAAX,EAAc;AACZ,cAAMV,IAAI,GAAGtB,KAAK,CAACgC,IAAI,GAAG,CAAR,CAAlB;AACA,aAAKnB,QAAL,CACE;AAAEZ,UAAAA,SAAS,EAAE+B,IAAI,GAAG;AAApB,SADF,EAEE,KAAKd,kBAAL,CAAwBI,IAAxB,CAFF;AAID;AACF,KA7HoC;;AAAA,SA+HrCY,MA/HqC,GA+H5B,MAAM;AACb,WAAKpB,aAAL;AACA,WAAKD,QAAL,CAAeY,SAAD,KAAgB;AAC5BtB,QAAAA,KAAK,EAAE,CAAC,GAAGsB,SAAS,CAACvB,aAAd,CADqB;AAE5BD,QAAAA,SAAS,EAAE,CAAC,CAFgB;AAG5BkC,QAAAA,SAAS,EAAE,EAHiB;AAI5BC,QAAAA,QAAQ,EAAE,EAJkB;AAK5BC,QAAAA,MAAM,EAAE;AALoB,OAAhB,CAAd;AAOA,WAAKjB,GAAL,CAAS,KAAKrB,KAAL,CAAWC,KAApB;AACD,KAzIoC;;AAAA,SA2IrCsC,mBA3IqC,GA2IdC,KAAD,IAAW;AAC/B,YAAMC,OAAO,GAAG,KAAKzC,KAAL,CAAWW,UAAX,CAAsBiB,MAAtB,GAA+B,CAA/C;AACA,WAAKC,KAAL;AACA,YAAMjB,aAAa,GAAG8B,MAAM,CAACF,KAAK,CAACG,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAA5B;AACA,WAAK7B,QAAL,CAAc;AAAEF,QAAAA;AAAF,OAAd,EAAiC,MAAM;AACrC,YAAI6B,OAAJ,EAAa,KAAKX,QAAL;AACd,OAFD;AAGD,KAlJoC;AAAA;;AAkBrCc,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAC5B,QAAIA,SAAS,CAACzC,KAAV,KAAoB,KAAK0C,KAAL,CAAW1C,KAAnC,EAA0C;AACxC,WAAKS,MAAL,CAAY,KAAKiC,KAAL,CAAW1C,KAAvB;AACD;;AACD,QAAIyC,SAAS,CAAC5C,KAAV,KAAoB,KAAK6C,KAAL,CAAW7C,KAAnC,EAA0C;AACxC,WAAKc,aAAL;AACA,WAAKD,QAAL,CAAc;AAAEb,QAAAA,KAAK,EAAE,KAAK6C,KAAL,CAAW7C;AAApB,OAAd;AACD;AACF,GA1BoC,CA4BrC;;;AAwHA8C,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,8BACE,QAAC,SAAD;AACE,QAAA,OAAO,EAAE,KAAK/C,KAAL,CAAWI,KADtB;AAEE,QAAA,MAAM,EAAE4C,IAAI,CAACC,GAAL,CAAS,GAAG,KAAKjD,KAAL,CAAWI,KAAvB,CAFV;AAGE,QAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWK,MAHrB;AAIE,QAAA,MAAM,EAAE,KAAKL,KAAL,CAAWM,MAJrB;AAKE,QAAA,MAAM,EAAE,KAAKN,KAAL,CAAWO,MALrB;AAME,QAAA,MAAM,EAAE,KAAKP,KAAL,CAAWQ,MANrB;AAOE,QAAA,aAAa,EAAE,KAAKR,KAAL,CAAWS;AAP5B;AAAA;AAAA;AAAA;AAAA,cADF,eAWE;AAAK,QAAA,SAAS,EAAC,6BAAf;AAAA,+BACE,QAAC,WAAD;AACE,UAAA,KAAK,EACH,KAAKT,KAAL,CAAWC,KAAX,CAAiB2B,MAAjB,GAA0B,CAA1B,GACK,KAAK5B,KAAL,CAAWE,SAAX,IACE,KAAKF,KAAL,CAAWC,KAAX,CAAiB2B,MAAjB,GAA0B,CAD5B,CAAD,GAEA,GAHJ,GAII;AANR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAXF,eAuBE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA,uCACmBsB,cAAc,EADjC;AAAA;AAAA;AAAA;AAAA;AAAA,cAvBF,eA2BE,QAAC,kBAAD;AACE,QAAA,MAAM,EACJ,KAAKlD,KAAL,CAAWE,SAAX,KAAyB,CAAC,CAA1B,GACI,KAAKmB,GAAL,CAAS8B,IAAT,CAAc,IAAd,EAAoB,KAAKnD,KAAL,CAAWC,KAA/B,CADJ,GAEI,KAAK6B,QAAL,CAAcqB,IAAd,CAAmB,IAAnB,CAJR;AAME,QAAA,OAAO,EAAE,KAAKtB,KAAL,CAAWsB,IAAX,CAAgB,IAAhB,CANX;AAOE,QAAA,SAAS,EAAE,KAAKnB,WAAL,CAAiBmB,IAAjB,CAAsB,IAAtB,CAPb;AAQE,QAAA,UAAU,EAAE,KAAKjB,YAAL,CAAkBiB,IAAlB,CAAuB,IAAvB,CARd;AASE,QAAA,QAAQ,EAAE,KAAKhB,MAAL,CAAYgB,IAAZ,CAAiB,IAAjB,CATZ;AAUE,QAAA,aAAa,EAAE,KAAKZ,mBAVtB;AAWE,QAAA,OAAO,EAAE,KAAKvC,KAAL,CAAWW,UAAX,CAAsBiB,MAAtB,GAA+B,CAX1C;AAYE,QAAA,YAAY,EACT,KAAK5B,KAAL,CAAWE,SAAX,IAAwB,KAAKF,KAAL,CAAWC,KAAX,CAAiB2B,MAAjB,GAA0B,CAAlD,IACC,KAAK5B,KAAL,CAAWE,SAAX,KAAyB,CAAC,CAD5B,IAEA,KAAKF,KAAL,CAAWC,KAAX,CAAiB2B,MAAjB,IAA2B,CAf/B,CAiBE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBF;AAyBE,QAAA,eAAe,EACb,KAAK5B,KAAL,CAAWE,SAAX,IAAwB,KAAKF,KAAL,CAAWC,KAAX,CAAiB2B,MAAjB,GAA0B,CA1BtD;AA4BE,QAAA,gBAAgB,EAAE,KAAK5B,KAAL,CAAWE,SAAX,IAAwB,CA5B5C;AA6BE,QAAA,cAAc,EAAE,KAAKF,KAAL,CAAWE,SAAX,IAAwB,CA7B1C;AA8BE,QAAA,aAAa,EAAE,KAAKF,KAAL,CAAWY;AA9B5B;AAAA;AAAA;AAAA;AAAA,cA3BF,eA4DE,QAAC,QAAD,OAAc,KAAKkC,KAAL,CAAWM;AAAzB;AAAA;AAAA;AAAA;AAAA,cA5DF,eA8DE,QAAC,QAAD,OAAc,KAAKN,KAAL,CAAWO;AAAzB;AAAA;AAAA;AAAA;AAAA,cA9DF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAkED;;AAvNoC;;AA0NvC,IAAIC,SAAJ,EAAeC,OAAf;;AAEA,SAASC,gBAAT,GAA4B;AAC1BF,EAAAA,SAAS,GAAG,IAAIG,IAAJ,EAAZ;AACD;;AAAA;;AAED,SAASP,cAAT,GAA0B;AACxBK,EAAAA,OAAO,GAAG,IAAIE,IAAJ,EAAV;AACA,MAAIC,QAAQ,GAAGH,OAAO,GAAGD,SAAzB,CAFwB,CAEY;AACpC;;AACAI,EAAAA,QAAQ,IAAI,IAAZ,CAJwB,CAMxB;;AACA,MAAIC,OAAO,GAAGX,IAAI,CAACY,KAAL,CAAWF,QAAX,CAAd;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYH,OAAO,GAAG,UAAtB;AACD;;AAED,eAAe5D,cAAf","sourcesContent":["import React, { Component } from 'react';\nimport './style.css';\n\n// Sub components\nimport SortChart from '../SortChart';\nimport VisualizerControls from '../../molecules/VisualizerControls';\nimport ProgressBar from '../../molecules/ProgressBar';\nimport ColorKey from '../../molecules/ColorKey';\nimport SortInfo from '../../molecules/SortInfo';\n\nclass SortVisualizer extends Component {\n  state = {\n    trace: [],\n    traceStep: -1,\n\n    originalArray: [],\n    array: [],\n    groupA: [],\n    groupB: [],\n    groupC: [],\n    groupD: [],\n    sortedIndices: [],\n    timeEnd: 0,\n\n    timeoutIds: [],\n    playbackSpeed: 1\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.array !== this.props.array) {\n      this._reset(this.props.array);\n    }\n    if (prevProps.trace !== this.props.trace) {\n      this.clearTimeouts();\n      this.setState({ trace: this.props.trace });\n    }\n  }\n\n  // Actions\n\n  _reset = (array) => {\n    this.setState({\n      array,\n      trace: [],\n      traceStep: -1,\n      groupA: [],\n      groupB: [],\n      groupC: [],\n      groupD: [],\n      sortedIndices: [],\n      originalArray: [...array]\n    });\n  };\n\n  clearTimeouts = () => {\n    this.state.timeoutIds.forEach((timeoutId) =>\n      clearTimeout(timeoutId)\n    );\n    this.setState({ timeoutIds: [] });\n  };\n\n  _changeVisualState = (visualState) => {\n    this.setState({\n      array: visualState.array,\n      groupA: visualState.groupA,\n      groupB: visualState.groupB,\n      groupC: visualState.groupC,\n      groupD: visualState.groupD,\n      sortedIndices: visualState.sortedIndices\n    });\n  };\n\n  run = (trace) => {\n    const timeoutIds = [];\n    const timer = 250 / this.state.playbackSpeed;\n\n    // Set a timeout for each item in the trace\n    trace.forEach((item, i) => {\n      let timeoutId = setTimeout(\n        (item) => {\n          this.setState(\n            (prevState) => ({\n              traceStep: prevState.traceStep + 1\n            }),\n            this._changeVisualState(item)\n          );\n        },\n        i * timer,\n        item\n      );\n\n      timeoutIds.push(timeoutId);\n    });\n\n    // Clear timeouts upon completion\n    let timeoutId = setTimeout(\n      this.clearTimeouts,\n      trace.length * timer\n    );\n    timeoutIds.push(timeoutId);\n\n    this.setState({ timeoutIds });\n  };\n\n  pause = () => {\n    this.clearTimeouts();\n  };\n\n  continue = () => {\n    const trace = this.state.trace.slice(this.state.traceStep);\n    this.run(trace);\n  };\n\n  stepForward = () => {\n    const trace = this.state.trace;\n    const step = this.state.traceStep;\n    if (step < trace.length - 1) {\n      const item = trace[step + 1];\n      this.setState(\n        { traceStep: step + 1 },\n        this._changeVisualState(item)\n      );\n    }\n  };\n\n  stepBackward = () => {\n    const trace = this.state.trace;\n    const step = this.state.traceStep;\n    if (step > 0) {\n      const item = trace[step - 1];\n      this.setState(\n        { traceStep: step - 1 },\n        this._changeVisualState(item)\n      );\n    }\n  };\n\n  repeat = () => {\n    this.clearTimeouts();\n    this.setState((prevState) => ({\n      array: [...prevState.originalArray],\n      traceStep: -1,\n      comparing: [],\n      compared: [],\n      sorted: []\n    }));\n    this.run(this.state.trace);\n  };\n\n  adjustPlaybackSpeed = (speed) => {\n    const playing = this.state.timeoutIds.length > 0;\n    this.pause();\n    const playbackSpeed = Number(speed.split('x')[0]);\n    this.setState({ playbackSpeed }, () => {\n      if (playing) this.continue();\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"SortVisualizer\">\n        <SortChart\n          numbers={this.state.array}\n          maxNum={Math.max(...this.state.array)}\n          groupA={this.state.groupA}\n          groupB={this.state.groupB}\n          groupC={this.state.groupC}\n          groupD={this.state.groupD}\n          sortedIndices={this.state.sortedIndices}\n        />\n\n        <div className=\"SortVisualizer__ProgressBar\">\n          <ProgressBar\n            width={\n              this.state.trace.length > 0\n                ? (this.state.traceStep /\n                    (this.state.trace.length - 1)) *\n                  100\n                : 0\n            }\n          />\n        </div>\n\n        <div className=\"SortVisualizer__ExecTime\">\n          Execution Time: {endElapsedTime()}\n        </div>\n\n        <VisualizerControls\n          onPlay={\n            this.state.traceStep === -1\n              ? this.run.bind(this, this.state.trace)\n              : this.continue.bind(this)\n          }\n          onPause={this.pause.bind(this)}\n          onForward={this.stepForward.bind(this)}\n          onBackward={this.stepBackward.bind(this)}\n          onRepeat={this.repeat.bind(this)}\n          onAdjustSpeed={this.adjustPlaybackSpeed}\n          playing={this.state.timeoutIds.length > 0}\n          playDisabled={\n            (this.state.traceStep >= this.state.trace.length - 1 &&\n              this.state.traceStep !== -1) ||\n            this.state.trace.length <= 0\n          }\n          // timeStart={\n          //   this.state.traceStep === -1 ? startElapsedTime() : 0\n          // }\n          // timeEnd={\n          //   (this.state.traceStep >= this.state.trace.length - 1 &&\n          //       this.state.traceStep !== -1) ||\n          //   this.state.trace.length <= 0 ? endElapsedTime() : 0\n          // }\n          forwardDisabled={\n            this.state.traceStep >= this.state.trace.length - 1\n          }\n          backwardDisabled={this.state.traceStep <= 0}\n          repeatDisabled={this.state.traceStep <= 0}\n          playbackSpeed={this.state.playbackSpeed}\n        />\n\n        <ColorKey {...this.props.colorKey} />\n\n        <SortInfo {...this.props.desc} />\n      </div>\n    );\n  }\n}\n\nlet startTime, endTime;\n\nfunction startElapsedTime() {\n  startTime = new Date();\n};\n\nfunction endElapsedTime() {\n  endTime = new Date();\n  let timeDiff = endTime - startTime; //in ms\n  // strip the ms\n  timeDiff /= 1000;\n\n  // get seconds\n  let seconds = Math.round(timeDiff);\n  console.log(seconds + \" seconds\");\n}\n\nexport default SortVisualizer;\n"]},"metadata":{},"sourceType":"module"}